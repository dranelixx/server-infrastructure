[Unit]
Description=GitHub Actions Runner
After=network.target

[Service]
Type=simple
User={{ github_runner_user }}
Group={{ github_runner_group }}
WorkingDirectory={{ github_runner_home }}
ExecStart={{ github_runner_home }}/run.sh
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal
SyslogIdentifier=github-runner

# Security hardening
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=read-only
ReadWritePaths={{ github_runner_home }} {{ github_runner_work_dir }}

# Environment
Environment="RUNNER_ALLOW_RUNASROOT=0"

[Install]
WantedBy=multi-user.target
